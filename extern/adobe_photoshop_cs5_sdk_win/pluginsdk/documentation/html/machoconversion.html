<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!--
/*
    Copyright 2005-2006 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://opensource.adobe.com/licenses.html)
*/
Some files are held under additional license. Please see "licenses.html" for more information.
-->

<head>
    <TITLE>Adobe Photoshop SDK: Conversion plug-ins to Mach-O binary format for Mac OS</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="basic.css"/>
    <STYLE TYPE="text/css" MEDIA="all"><!--
        @import url("modern.css");
    --></STYLE>
    <LINK TYPE="text/css" REL="stylesheet" HREF="print.css" MEDIA="print"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="mainnav.css"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="stlab.css"/>
	<link href="adobetabs.css" rel="stylesheet" type="text/css">
<!-- 
    <LINK REL="alternate" TITLE="opensource.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
-->
</HEAD>

<body bgcolor="white">

<div id="mainnav" width="100%">
<table width="100%" border="0"><tr><td width="50%">
<a title="Adobe Systems home page" href="http://www.adobe.com/" tabindex="2"><img src="images/logo.gif" alt="Adobe Systems, Inc." height="80" width="150"/></a>
</td><td align="right" valign="top">
<a href="index.html" class="el" target="_top"><font size="+2" color="black">Adobe Photoshop SDK</font></a><br/>
<!--
<a href="http://opensource.adobe.com" class="el" target="_top"><font size="-2" color="black">opensource.adobe.com</font></a>
-->
</td></tr></table>

</div>
<br/>
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr><td width="10" nowrap="1"> </td>
<td valign="top">
    <table border="0" bgcolor=#ededed cellpadding="5">
    <tr><td nowrap="1">
        <h3 class="navbar">Getting Started</h3>
        <ul>
            <li><a href="ProgrammersGuideIntro.html">Home</a></li>
            <li><a href="index.html">New for CS5</a></li>
	        <li><a href="SixtyFourMacintosh.html">Making 64 bit plug-ins for Macintosh</a></li>
	        <li><a href="SixtyFour.html">Making 64 bit plug-ins for Windows</a></li>
            <li><a href="faqs.html">Frequently Asked Questions</a></li>
            <li><a href="tutorialsexamples.html">Tutorials and Examples</a></li>
			<li><a href="DeveloperResources.html">Developer Resources</a></li>
        </ul>
        <h3 class="navbar">SDK API Reference</h3>
        <ul>
			<li><a href="annotated.html">Data Structure List</a></li>
		    <li><a href="classes.html">Data Structure Index</a></li>
			<li><a href="functions.html">Member Index</a></li>
			<li><a href="files.html">File List</a></li>
		    <li><a href="globals.html">File Member Index</a></li>
        </ul>
        <h3 class="navbar">SDK API Features</h3>
        <ul>
            <li><a href="rgcallbacks.html">Callbacks</a></li>
			<li><a href="pluginmodules.html">Plug-in Modules</a></li>
		    <li><a href="memorymanagement.html">Memory Management</a></li>
			<li><a href="resourcemanagement.html">Resource Management</a></li>
			<li><a href="pixelmanagement.html">Pixel Management</a></li>
			<li><a href="colormanagement.html">Color Management</a></li>
			<li><a href="automation.html">Actions and Automation</a></li>
			<li><a href="filehandling.html">File Handling</a></li>
        </ul>
<!--  Moved to link under "Other Documentation"
        <h3 class="navbar">Progammer's Guide</h3>
        <ul>
            <li><a href="PGPlugInBasics.html">Plug-in Basics</a></li>
            <li><a href="PGPlugInTypes.html">Plug-in Types</a></li>
            <li><a href="PGPlugInInterface.html">Plug-in Interface</a></li>
            <li><a href="PGMemoryMgmtStrategies.html">Memory Management Strategies</a></li>
            <li><a href="PGMacOSPlugins.html">Creating Mac OS Plug-ins</a></li>
            <li><a href="PGWinPlugins.html">Creating Windows Plug-ins</a></li>
            <li><a href="PGCallbacks.html">Callbacks and Callback Suites</a></li>
            <li><a href="PGWritingPlugins.html">Writing Plug-ins</a></li>
			<li><a href="PGScriptingPlugins.html">Scripting Plug-ins</a>
		    <li><a href="pgpiplresources.html">Creating PiPL Resources</a></li>
		    <li><a href="pgsamplecode.html">Sample Code</a></li>
		    <li><a href="glossary.html">Glossary of Acronyms</a></li>
        </ul>
-->
        <h3 class="navbar">Other Documentation</h3>
        <ul>
          <li><a href="MachOConversion.html">Converting to Mach-O format</a></li>
          <li><a href="MakingXCodeProjects.html">Making XCode Projects for Mac OS</a></li>
          <li><a href="ProgrammersGuideMain.html">SDK Programmer's Guide</a></li>
		      <li><a href="../PICA.pdf">Adobe PICA API</a>
		      <li><a href="../ADMReferenceGuide.pdf">Adobe Dialog Manager</a>
        </ul>
<!--  Moved to Link under "Getting Started".
        <h3 class="navbar">Developer Resources</h3>
        <ul>
			<li><a href="http://partners.adobe.com/public/developer/photoshop/devcenter.html">Adobe Photoshop Developer Center</a>
            <li><a href="mailinglistandforum.html">Suppport</a></li>
            <li><a href="technicalnotes.html">Technical Notes</a></li>
            <li><a href="license.html">SDK License Agreements</a></li>
        </ul>
-->
    </td></tr>
    </table>
</td>

<td width="10" nowrap="1"> </td>
<td width="100%" valign="top">

<!-- End Header -->

<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="MachOConversion">Conversion plug-ins to Mach-O binary format for Mac OS</a></h1>This document describes the process for moving your PEF based Photoshop plug-in to Mach-O binary format.<p>
For more information on this topic, please see the documentation found on the Apple web site: <a href="http://developer.apple.com">http://developer.apple.com</a><h2><a class="anchor" name="Requirements">
Requirements</a></h2>
The required development environment for this conversion is Metrowerks CodeWarrior (CW) 9.2. <a href="http://www.metroworks.com">http://www.metroworks.com</a><p>
You will also need the Apple OS X SDK installed. <a href="http://www.apple.com">http://www.apple.com</a><p>
The first step is auto converting your current project to the CW 9.2 project format. This is done by opening your project in CW 9.2 and responding 'Convert' to the convert dialog box that appears.<h2><a class="anchor" name="ChangeProjectSettings">
Change Your Project Settings</a></h2>
<ol type=1>
<li>In the Target &gt; Target Settings panel change the Linker to “Mac OS X PowerPC Mach-O”</li></ol>
<p>
<div align="center">
<img src="images/MachOConversion_img_0.jpg" alt="MachOConversion_img_0.jpg">
</div>
<p>
<ol type=1>
<li>In the Target &gt; Access Paths panel add “/usr/lib” into the System Paths list. ( You will need the Apple OS X SDK installed. )</li></ol>
<p>
<div align="center">
<img src="images/MachOConversion_img_1.jpg" alt="MachOConversion_img_1.jpg">
</div>
<p>
<ol type=1>
<li>In the Target &gt; PPC Mac OS X Target panel change the Project Type to “Bundle Package”. Set the Creator to 8BIM and the Type to 8BFM ( filter ).</li></ol>
<p>
<div align="center">
<img src="images/MachOConversion_img_2.jpg" alt="MachOConversion_img_2.jpg">
</div>
<p>
<ol type=1>
<li>In the Language Settings &gt; C/C++ Language panel check the following items.</li></ol>
<p>
<div align="center">
<img src="images/MachOConversion_img_3.jpg" alt="MachOConversion_img_3.jpg">
</div>
<p>
<ol type=1>
<li>The C/C++ Warnings panel can be adjusted as you like. Here are the settings that I have:</li></ol>
<p>
<div align="center">
<img src="images/MachOConversion_img_4.jpg" alt="MachOConversion_img_4.jpg">
</div>
<p>
<ol type=1>
<li>In the Linker &gt; PPC Mac OS X Linker, select "Use pragma" for the Export Symbols option. Add “_PluginMain” to the Main Entry Point box. Check the other items as shown:</li></ol>
<p>
<div align="center">
<img src="images/MachOConversion_img_5.jpg" alt="MachOConversion_img_5.jpg">
</div>
<p>
<ol type=1>
<li>The SDK also includes multiple header files to help with your plug-in configuration. These are found in samplecode/common/includes:</li></ol>
<p>
<div class="fragment"><pre class="fragment">    PIMachODebug.h, PIMachORelease.h, PIPEFDebug.h, PIPEFRelease.h, PIRezMachO.h, PIRezPEF.h
</pre></div><p>
<ol type=1>
<li>Click the “Save” button and close the dialog.</li></ol>
<h2><a class="anchor" name="ModifyPiPL">
Modify your PiPL selector</a></h2>
The new CodeMachOPowerPC PiPL entry must be added to your PiPL resource. Here is the Dissolve sample:<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">    #ifdef __PIWin__</span>
<span class="preprocessor"></span>        CodeWin32X86 { <span class="stringliteral">"PluginMain"</span> },
<span class="preprocessor">    #else</span>
<span class="preprocessor"></span><span class="preprocessor">        #ifdef BUILDING_FOR_MACH</span>
<span class="preprocessor"></span>            CodeMachOPowerPC { 0, 0, <span class="stringliteral">"PluginMain"</span> },
<span class="preprocessor">        #else</span>
<span class="preprocessor"></span>            CodeCarbonPowerPC { 0, 0, <span class="stringliteral">""</span> },
<span class="preprocessor">        #endif</span>
<span class="preprocessor">    #endif</span>
</pre></div><h2><a class="anchor" name="Libraries">
Libraries for Mach-O</a></h2>
PEF required the following system libraries. Remove them.<p>
MSL_C_Carbon.lib MSL_C++_Carbon.lib MSL_Runtime_PPC.Lib CarbonLib console.stubs.c<p>
Mach-O uses the following libraries. Add these:<h2><a class="anchor" name="Frameworks">
Frameworks for Mach-O</a></h2>
Select the Frameworks tab. Right click in the window and select “Add files...” Navigate to “System/Library/Frameworks” and add the “Carbon.framework” and “System.framework”.<p>
Compile, Link and Test 
<!-- Begin Footer -->
</td>
<td width="20">&nbsp;&nbsp;</td>
</table>

<div id="footerrow"><!--give footer 25px of white above--></div>
<div id="footer" title="footer: links to copyright and other legal information">
<p><a href="licenses.html" class="el">&copy; 2010 Adobe Systems Incorporated</a></p>
<a title="Terms of Use" href="http://www.adobe.com/misc/copyright.html">Terms of Use - </a>
<a title="Privacy Policy" href="http://www.adobe.com/misc/privacy.html">Privacy Policy - </a>
<a href="http://access.adobe.com">Accessibility - </a>
<a title="Avoid software piracy" href="http://www.adobe.com/aboutadobe/antipiracy/main.html">Avoid software piracy - </a>
<a title="Permissions and trademarks" href="http://www.adobe.com/misc/agreement.html">Permissions and trademarks - </a>
<a title="Product License Agreements" href="http://www.adobe.com/products/eulas/main.html">Product License Agreements</a></div>
<p/>
</body>
</html>
