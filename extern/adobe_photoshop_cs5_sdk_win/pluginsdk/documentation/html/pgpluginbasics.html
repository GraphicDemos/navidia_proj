<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!--
/*
    Copyright 2005-2006 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://opensource.adobe.com/licenses.html)
*/
Some files are held under additional license. Please see "licenses.html" for more information.
-->

<head>
    <TITLE>Adobe Photoshop SDK: Plug-in Basics</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="basic.css"/>
    <STYLE TYPE="text/css" MEDIA="all"><!--
        @import url("modern.css");
    --></STYLE>
    <LINK TYPE="text/css" REL="stylesheet" HREF="print.css" MEDIA="print"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="mainnav.css"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="stlab.css"/>
	<link href="adobetabs.css" rel="stylesheet" type="text/css">
<!-- 
    <LINK REL="alternate" TITLE="opensource.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
-->
</HEAD>

<body bgcolor="white">

<div id="mainnav" width="100%">
<table width="100%" border="0"><tr><td width="50%">
<a title="Adobe Systems home page" href="http://www.adobe.com/" tabindex="2"><img src="images/logo.gif" alt="Adobe Systems, Inc." height="80" width="150"/></a>
</td><td align="right" valign="top">
<a href="index.html" class="el" target="_top"><font size="+2" color="black">Adobe Photoshop SDK</font></a><br/>
<!--
<a href="http://opensource.adobe.com" class="el" target="_top"><font size="-2" color="black">opensource.adobe.com</font></a>
-->
</td></tr></table>

</div>
<br/>
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr><td width="10" nowrap="1"> </td>
<td valign="top">
    <table border="0" bgcolor=#ededed cellpadding="5">
    <tr><td nowrap="1">
        <h3 class="navbar">Getting Started</h3>
        <ul>
            <li><a href="ProgrammersGuideIntro.html">Home</a></li>
            <li><a href="index.html">New for CS5</a></li>
	        <li><a href="SixtyFourMacintosh.html">Making 64 bit plug-ins for Macintosh</a></li>
	        <li><a href="SixtyFour.html">Making 64 bit plug-ins for Windows</a></li>
            <li><a href="faqs.html">Frequently Asked Questions</a></li>
            <li><a href="tutorialsexamples.html">Tutorials and Examples</a></li>
			<li><a href="DeveloperResources.html">Developer Resources</a></li>
        </ul>
        <h3 class="navbar">SDK API Reference</h3>
        <ul>
			<li><a href="annotated.html">Data Structure List</a></li>
		    <li><a href="classes.html">Data Structure Index</a></li>
			<li><a href="functions.html">Member Index</a></li>
			<li><a href="files.html">File List</a></li>
		    <li><a href="globals.html">File Member Index</a></li>
        </ul>
        <h3 class="navbar">SDK API Features</h3>
        <ul>
            <li><a href="rgcallbacks.html">Callbacks</a></li>
			<li><a href="pluginmodules.html">Plug-in Modules</a></li>
		    <li><a href="memorymanagement.html">Memory Management</a></li>
			<li><a href="resourcemanagement.html">Resource Management</a></li>
			<li><a href="pixelmanagement.html">Pixel Management</a></li>
			<li><a href="colormanagement.html">Color Management</a></li>
			<li><a href="automation.html">Actions and Automation</a></li>
			<li><a href="filehandling.html">File Handling</a></li>
        </ul>
<!--  Moved to link under "Other Documentation"
        <h3 class="navbar">Progammer's Guide</h3>
        <ul>
            <li><a href="PGPlugInBasics.html">Plug-in Basics</a></li>
            <li><a href="PGPlugInTypes.html">Plug-in Types</a></li>
            <li><a href="PGPlugInInterface.html">Plug-in Interface</a></li>
            <li><a href="PGMemoryMgmtStrategies.html">Memory Management Strategies</a></li>
            <li><a href="PGMacOSPlugins.html">Creating Mac OS Plug-ins</a></li>
            <li><a href="PGWinPlugins.html">Creating Windows Plug-ins</a></li>
            <li><a href="PGCallbacks.html">Callbacks and Callback Suites</a></li>
            <li><a href="PGWritingPlugins.html">Writing Plug-ins</a></li>
			<li><a href="PGScriptingPlugins.html">Scripting Plug-ins</a>
		    <li><a href="pgpiplresources.html">Creating PiPL Resources</a></li>
		    <li><a href="pgsamplecode.html">Sample Code</a></li>
		    <li><a href="glossary.html">Glossary of Acronyms</a></li>
        </ul>
-->
        <h3 class="navbar">Other Documentation</h3>
        <ul>
          <li><a href="MachOConversion.html">Converting to Mach-O format</a></li>
          <li><a href="MakingXCodeProjects.html">Making XCode Projects for Mac OS</a></li>
          <li><a href="ProgrammersGuideMain.html">SDK Programmer's Guide</a></li>
		      <li><a href="../PICA.pdf">Adobe PICA API</a>
		      <li><a href="../ADMReferenceGuide.pdf">Adobe Dialog Manager</a>
        </ul>
<!--  Moved to Link under "Getting Started".
        <h3 class="navbar">Developer Resources</h3>
        <ul>
			<li><a href="http://partners.adobe.com/public/developer/photoshop/devcenter.html">Adobe Photoshop Developer Center</a>
            <li><a href="mailinglistandforum.html">Suppport</a></li>
            <li><a href="technicalnotes.html">Technical Notes</a></li>
            <li><a href="license.html">SDK License Agreements</a></li>
        </ul>
-->
    </td></tr>
    </table>
</td>

<td width="10" nowrap="1"> </td>
<td width="100%" valign="top">

<!-- End Header -->

<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="PGPlugInBasics">Plug-in Basics</a></h1><b>Sections on this Page</b><ul>
<li><a class="el" href="pgpluginbasics.html#PGModulesAndHosts">Plug-in modules and plug-in hosts</a></li><li><a class="el" href="pgpluginbasics.html#PGHistoryLesson">A short history lesson</a></li><li><a class="el" href="pgpluginbasics.html#PGMacWinDevelopment">Macintosh and Windows development</a></li><li><a class="el" href="pgpluginbasics.html#PGVersionInfo">Version Information</a></li></ul>
<p>
This section describes what plug-in modules are and provides information common to all plug-in modules. You should understand this material before proceeding to the chapters detailing the specific types of plug-in modules.<p>
This chapter also contains information about compiling and testing plug-in modules under the Mac OS and Microsoft Windows. Additional compiler-specific information is available in the toolkit header files.<h2><a class="anchor" name="PGModulesAndHosts">
Plug-in modules and plug-in hosts</a></h2>
Adobe Photoshop plug-in modules are software programs developed by Adobe Systems and third-party vendors with Adobe Systems to extend the standard Adobe Photoshop program. Plug-in modules can be added or updated independently by end users to customize Photoshop to their particular needs.<p>
This guide also frequently refers to plug-in hosts. A plug-in host is responsible for loading plug-in modules into memory and calling them. Adobe Photoshop is a plug-in host.<p>
These Adobe applications function as plug-in hosts: Adobe After Effects, Adobe Premiere, Adobe Illustrator, Adobe PageMaker, and Adobe PhotoDeluxe. Most of these applications support some, but not all, Photoshop plug-in modules. Many applications from third-party developers support the use of Photoshop plug-in modules, as well.<p>
Most plug-in hosts are application programs, but this not a requirement. A plug-in host may itself be a plug-in module. A good example of this is the "Photoshop Adapter" which allows Adobe Illustrator 6.0 to host Photoshop Format and Filter modules.<p>
This toolkit and guide are not designed for developers interested in creating plug-in hosts; the emphasis and goal for this guide is presenting information pertinent to creating plug-in modules.<p>
Unless otherwise stated, Adobe Photoshop is assumed to be the plug-in host throughout this manual. Other hosts may or may not support all the callbacks, properties and functionality described in this guide.<h2><a class="anchor" name="PGHistoryLesson">
A short history lesson</a></h2>
Plug-ins are not unique to Photoshop. Many Macintosh and Windows applications support some form of plug-in extensions. Perhaps the best known example of an application that supports a plug-in architecture is Apple’s HyperCard, with its support for XCMDs and XFCNs. One of the first companies to incorporate plug-in modules into their products was Silicon Beach, in its Digital Darkroom and SuperPaint products.<p>
Silicon Beach spent a lot of time developing a newer, better designed plug-in implementation. In HyperCard, developers have to paste their plug-ins into the host application using ResEdit. Silicon Beach’s design for plug-in modules has the code residing in individual files. This allows the plug-in files to be placed anywhere, not just in the System Folder. Silicon Beach’s design also incorporated the concept of version numbering, which allowed for smooth migration as new functionality was added to the interface.<p>
Adobe Photoshop’s implementation of plug-in modules loosely resembles that used by Silicon Beach. It uses a similar calling sequence, and the same version number scheme.<p>
However, the similarity ends there. As Photoshop’s plug-in architecture evolved, the detailed interface for Photoshop’s plug-in modules became completely different from that used by Silicon Beach. The differences were required primarily to support color images and Adobe Photoshop’s virtual memory scheme.<p>
A great overview of Macintosh programming with code fragments is provided in <em>A Fragment of Your Imagination,</em> by Joe Zobkiw (1995, Addison-Wesley, NY, ISBN 0-201-483358-0). Chapter ten of Zobkiw’s book is solely about writing Photoshop filters.<h2><a class="anchor" name="PGMacWinDevelopment">
Macintosh and Windows development</a></h2>
The original plug-in interface was designed when Adobe Photoshop was a Macintosh-only product. This heritage is still apparent today, and affects Windows developers building plug-ins. While you can build plug-in modules for Windows without needing a Macintosh, there are a number of data structures and Mac toolbox-like calls that will appear in your Windows code. The good news is that this makes building plug-ins that work across both Mac OS and Windows easier. The bad news is that if you’re developing only for the Windows platform, some of the terminology may be unfamiliar.<p>
Another important difference between the Macintosh and Windows is byte ordering. Motorola and PowerPC processors store pointers, 16-, and 32- bit numbers in big endian format, while Intel processors use little endian format. An example of this is the number 65298, which would disassemble as hex word $FF 12 on a Motorola or PowerPC processor, and $12 FF on an Intel processor. $12 FF on the Intel could be mistaken by beginning Macintosh programmers as 4863, when it in fact is 65298.<p>
Because many Photoshop files are designed to work across both platforms, the Photoshop engineering team chose to standardize on big endian format (Photoshop’s heritage shows through again). When programming under Windows, you must be careful to handle byte ordering properly.<h2><a class="anchor" name="PGVersionInfo">
Version Information</a></h2>
<b>2.5 &amp; 3.0 </b><br>
 The plug-in interface changed significantly with the release of Adobe Photoshop 3.0. The main difference is the use of 'PiPL' resources to describe plug-in module information. This replaces the older 'PiMI' resources, although Photoshop still fully supports PiMI based plug-in modules. PiPL and PiMI resources are discussed in the document <a href="../Plug-in Resource Guide.pdf">Cross Application Plug-in Development Resource Guide</a>.<p>
The other significant change in version 3.0 is the introduction of the <a class="el" href="group___direct_callbacks.html#gb8d137fdb4f514b132dd1bef202cba6f">AdvanceStateProc</a> callback function. This callback provides improved performance for plug-in modules that handle large images.<p>
<b>3.0.4 </b><br>
 In Photoshop version 3.0.4, the plug-in architecture was again enhanced. You can now set certain properties of a plug-in host using the <code>SetPropertyProc</code> callback. The <code>GetPropertyProc</code> and <code>SetPropertyProc</code> callbacks were grouped together to form a new callback suite. See <a class="el" href="group___property_suite.html">Property Suite Callbacks</a> for details.<p>
Version 3.0.4 also adds a new callback suite: the <a class="el" href="group___image_services_suite.html">Image Services Suite Callbacks</a>. The two callback functions in this suite allow you to resample image data, and are useful for various types of filter, import, and export modules.<p>
<b>3.0.5 </b><br>
 Version 3.0.5 offers bug fixes and compatibility updates for PowerPC Macintoshes and Windows 95. There are no new API changes or additions in 3.0.5.<p>
<b>4.0 </b><br>
 Version 4.0 expands the API to include two new plug-in module types: <a class="el" href="group___color_picker_module.html">color pickers</a> and <a class="el" href="group___selection_module.html">selections</a>, and an associated set of callback functions in the new <a class="el" href="group___channel_ports_suite.html">Channel Ports Suite</a>. There is also an added AppleEvent/AppleScript resource, 'aete', which describes your plug-in parameters to the Actions palette. Accompanying that is a set of callback functions in the new <a class="el" href="group___descriptor_suite.html">Descriptor</a> suite. The parameter blocks for Import, Export, Filter, and Format have grown to include the new callback suites, where appropriate. The module name for "Acquire" modules was renamed "Import" to be consistent with other Adobe products. This change is cosmetic—the code parameter and function names remain the same, such as <code>acquireSelectorContinue</code>.<p>
<b>4.0.1 </b><br>
 4.0.1 was mostly a bug fix release, but it does introduce new parameters in <code><a class="el" href="_p_i_acquire_8h.html">PIAcquire.h</a></code> to allow for importing images with transparency.<p>
<b>5.0 </b><br>
 Version 5.0 expands the API to include a new plug-in module type: <a class="el" href="group___automation_module.html">automation</a>. These plug-ins can call any scriptable Photoshop command and external filter modules, but cannot manipulate pixel data.<p>
See <a href="../Photoshop Actions Guide.pdf">Photoshop Actions Event Guide</a> for detailed information on automation plug-ins.<p>
<b>5.0.2 </b><br>
 Version 5.0.2 was mostly a bug fix release. The <code>canUseICCProfiles</code> flag, ICC profiles handed to Photoshop, and file formats writing 16 bit files were fixed in Version 5.0.2.<p>
<b>5.5 </b><br>
 Version 5.5 has very few modifications to the API. A <code>lutCount</code> variable was added to the end of the Import, Export, and File Format module paramater blocks. A new <code>ProgressText</code> PiPL property was added for special handling of the progress bar. The File Format modules also got a new Format Flag for transparency information.<p>
<b>6.0 </b><br>
 Version 6.0 has very few modifications to the API. A new routine was added to the Color Space Suite. Three new parameters were added to the Filter Paramater block, <code>iccProfileData</code>, <code>iccProfileSize</code>, and <code>canUseICCProfile</code>. More information is found in <a class="el" href="group___filter_module.html">Filter Module</a> and in the <code><a class="el" href="_p_i_filter_8h.html">PIFilter.h</a></code> header file.<p>
<b>7.0 </b><br>
 File format plug-ins can now display a thumbnail view in the <b>Open</b> dialog. See the SimpleFormat example fmtCanCreateThumbnail and openForPreview. Photoshop has now gone to a new system for the serial number. Old serial numbers can still be input through the Preferences panel.<p>
The Scripting Support plug-in developed for Illustrator is now available for Photoshop. You can now create JavaScript, AppleScript, and Visual Basic scripts. Scripting Support comes in a separate package and installer. Plug ins now have read access to all the layers in a Photoshop document. See the PoorMansTypeTool example.<p>
Share Data Section must be off in your project settings for Macintosh.<p>
The AutomationFilter automation plug in and Hidden filter plug in work together to access all layers and all channels of a document. This release moves the pixel read and write inside the Hidden plug in. This allows the Hidden filter to work faster and to use tiling.<p>
New properties available, see <code><a class="el" href="_p_i_properties_8h.html">PIProperties.h</a></code> and the Propetizer example: <code>propTargetLayerLock, propXMP, propSerialString2, propSelectedSliceID, propSelectedSliceIndex, propVersion, propPlayInProgress, propUnicodeName, propUniStr255Name,</code> and <code>propUnicodeNameWithoutExtension</code>.<p>
If your dialog uses a custom WDEF your dialog will show up behind the Photoshop palettes on OS X. Use the following OS call to fix the problem. <div class="fragment"><pre class="fragment">SetWindowGroup(myWindowRef, GetWindowGroupOfClass(kModalWindowClass)); 
</pre></div> See the Apple documentation for more details.<p>
The Project settings for Windows now use Blend for Processor.<p>
<b>CS (8.0) </b><br>
 Documents larger than 30,000 x 30,000 pixels. All records have been updated for 32 bit coordinates for document rects and points. Automation plug-ins can now set a <code>FileBrowseAware</code> flag. Automation plug-ins with this PiPL property will show up in a File Browser menu item as well as the <b>File-&gt;Automate</b> menu item. <code>MaxSize</code> and <code>MinSize</code> PiPL properties have been added for setting the max and min size of a document your plug-in will work on. New properties for unicode support. See <code><a class="el" href="_p_i_properties_8h.html">PIProperties.h</a></code> <p>
<b>CS2 (9.0) </b><br>
 <b>CS3 (10.0) </b><br>
 
<!-- Begin Footer -->
</td>
<td width="20">&nbsp;&nbsp;</td>
</table>

<div id="footerrow"><!--give footer 25px of white above--></div>
<div id="footer" title="footer: links to copyright and other legal information">
<p><a href="licenses.html" class="el">&copy; 2010 Adobe Systems Incorporated</a></p>
<a title="Terms of Use" href="http://www.adobe.com/misc/copyright.html">Terms of Use - </a>
<a title="Privacy Policy" href="http://www.adobe.com/misc/privacy.html">Privacy Policy - </a>
<a href="http://access.adobe.com">Accessibility - </a>
<a title="Avoid software piracy" href="http://www.adobe.com/aboutadobe/antipiracy/main.html">Avoid software piracy - </a>
<a title="Permissions and trademarks" href="http://www.adobe.com/misc/agreement.html">Permissions and trademarks - </a>
<a title="Product License Agreements" href="http://www.adobe.com/products/eulas/main.html">Product License Agreements</a></div>
<p/>
</body>
</html>
