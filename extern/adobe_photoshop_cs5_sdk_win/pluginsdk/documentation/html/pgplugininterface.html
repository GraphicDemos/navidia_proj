<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!--
/*
    Copyright 2005-2006 Adobe Systems Incorporated
    Distributed under the MIT License (see accompanying file LICENSE_1_0_0.txt
    or a copy at http://opensource.adobe.com/licenses.html)
*/
Some files are held under additional license. Please see "licenses.html" for more information.
-->

<head>
    <TITLE>Adobe Photoshop SDK: Plug-in Module Interface</TITLE>
    <META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="basic.css"/>
    <STYLE TYPE="text/css" MEDIA="all"><!--
        @import url("modern.css");
    --></STYLE>
    <LINK TYPE="text/css" REL="stylesheet" HREF="print.css" MEDIA="print"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="mainnav.css"/>
    <LINK TYPE="text/css" REL="stylesheet" HREF="stlab.css"/>
	<link href="adobetabs.css" rel="stylesheet" type="text/css">
<!-- 
    <LINK REL="alternate" TITLE="opensource.adobe.com RSS" HREF="http://sourceforge.net/export/rss2_projnews.php?group_id=132417&amp;rss_fulltext=1" TYPE="application/rss+xml"/>
-->
</HEAD>

<body bgcolor="white">

<div id="mainnav" width="100%">
<table width="100%" border="0"><tr><td width="50%">
<a title="Adobe Systems home page" href="http://www.adobe.com/" tabindex="2"><img src="images/logo.gif" alt="Adobe Systems, Inc." height="80" width="150"/></a>
</td><td align="right" valign="top">
<a href="index.html" class="el" target="_top"><font size="+2" color="black">Adobe Photoshop SDK</font></a><br/>
<!--
<a href="http://opensource.adobe.com" class="el" target="_top"><font size="-2" color="black">opensource.adobe.com</font></a>
-->
</td></tr></table>

</div>
<br/>
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr><td width="10" nowrap="1"> </td>
<td valign="top">
    <table border="0" bgcolor=#ededed cellpadding="5">
    <tr><td nowrap="1">
        <h3 class="navbar">Getting Started</h3>
        <ul>
            <li><a href="ProgrammersGuideIntro.html">Home</a></li>
            <li><a href="index.html">New for CS5</a></li>
	        <li><a href="SixtyFourMacintosh.html">Making 64 bit plug-ins for Macintosh</a></li>
	        <li><a href="SixtyFour.html">Making 64 bit plug-ins for Windows</a></li>
            <li><a href="faqs.html">Frequently Asked Questions</a></li>
            <li><a href="tutorialsexamples.html">Tutorials and Examples</a></li>
			<li><a href="DeveloperResources.html">Developer Resources</a></li>
        </ul>
        <h3 class="navbar">SDK API Reference</h3>
        <ul>
			<li><a href="annotated.html">Data Structure List</a></li>
		    <li><a href="classes.html">Data Structure Index</a></li>
			<li><a href="functions.html">Member Index</a></li>
			<li><a href="files.html">File List</a></li>
		    <li><a href="globals.html">File Member Index</a></li>
        </ul>
        <h3 class="navbar">SDK API Features</h3>
        <ul>
            <li><a href="rgcallbacks.html">Callbacks</a></li>
			<li><a href="pluginmodules.html">Plug-in Modules</a></li>
		    <li><a href="memorymanagement.html">Memory Management</a></li>
			<li><a href="resourcemanagement.html">Resource Management</a></li>
			<li><a href="pixelmanagement.html">Pixel Management</a></li>
			<li><a href="colormanagement.html">Color Management</a></li>
			<li><a href="automation.html">Actions and Automation</a></li>
			<li><a href="filehandling.html">File Handling</a></li>
        </ul>
<!--  Moved to link under "Other Documentation"
        <h3 class="navbar">Progammer's Guide</h3>
        <ul>
            <li><a href="PGPlugInBasics.html">Plug-in Basics</a></li>
            <li><a href="PGPlugInTypes.html">Plug-in Types</a></li>
            <li><a href="PGPlugInInterface.html">Plug-in Interface</a></li>
            <li><a href="PGMemoryMgmtStrategies.html">Memory Management Strategies</a></li>
            <li><a href="PGMacOSPlugins.html">Creating Mac OS Plug-ins</a></li>
            <li><a href="PGWinPlugins.html">Creating Windows Plug-ins</a></li>
            <li><a href="PGCallbacks.html">Callbacks and Callback Suites</a></li>
            <li><a href="PGWritingPlugins.html">Writing Plug-ins</a></li>
			<li><a href="PGScriptingPlugins.html">Scripting Plug-ins</a>
		    <li><a href="pgpiplresources.html">Creating PiPL Resources</a></li>
		    <li><a href="pgsamplecode.html">Sample Code</a></li>
		    <li><a href="glossary.html">Glossary of Acronyms</a></li>
        </ul>
-->
        <h3 class="navbar">Other Documentation</h3>
        <ul>
          <li><a href="MachOConversion.html">Converting to Mach-O format</a></li>
          <li><a href="MakingXCodeProjects.html">Making XCode Projects for Mac OS</a></li>
          <li><a href="ProgrammersGuideMain.html">SDK Programmer's Guide</a></li>
		      <li><a href="../PICA.pdf">Adobe PICA API</a>
		      <li><a href="../ADMReferenceGuide.pdf">Adobe Dialog Manager</a>
        </ul>
<!--  Moved to Link under "Getting Started".
        <h3 class="navbar">Developer Resources</h3>
        <ul>
			<li><a href="http://partners.adobe.com/public/developer/photoshop/devcenter.html">Adobe Photoshop Developer Center</a>
            <li><a href="mailinglistandforum.html">Suppport</a></li>
            <li><a href="technicalnotes.html">Technical Notes</a></li>
            <li><a href="license.html">SDK License Agreements</a></li>
        </ul>
-->
    </td></tr>
    </table>
</td>

<td width="10" nowrap="1"> </td>
<td width="100%" valign="top">

<!-- End Header -->

<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="PGPlugInInterface">Plug-in Module Interface</a></h1><b>Sections on this Page</b><ul>
<li><a class="el" href="pgplugininterface.html#PGPluginEntryPoint">Plug-in Entry Point</a></li><li><a class="el" href="pgplugininterface.html#PGErrorReporting">Error reporting</a></li><li><a class="el" href="pgplugininterface.html#PGAboutBoxes">About boxes</a></li></ul>
<h2><a class="anchor" name="PGPluginEntryPoint">
Plug-in Entry Point</a></h2>
A plug-in host calls a plug-in module in response to a user action. Generally, executing a user command results in a series of calls from the plug-in host to the plug-in module. All calls from the host to the module are done through a single entry point, the <code>main()</code> routine of the plug-in module. The prototype for the main entry point is:<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#if MSWindows</span>
<span class="preprocessor"></span><span class="keywordtype">void</span> ENTRYPOINT (
    <span class="keywordtype">short</span>   selector,
    <span class="keywordtype">void</span>*   pluginParamBlock,
    <span class="keywordtype">long</span>*   pluginData,
    <span class="keywordtype">short</span>*  result);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>pascal <span class="keywordtype">void</span> main (
    <span class="keywordtype">short</span>   selector,
    Ptr     pluginParamBlock,
    <span class="keywordtype">long</span>*   pluginData,
    <span class="keywordtype">short</span>*  result);
<span class="preprocessor">#endif</span>
</pre></div><p>
<b>selector</b> <br>
 The <code>selector</code> parameter indicates the type of operation requested by the plug-in host. Selector=0 always means display an About box. Other selector values are discussed in later chapters for each type of plug-in module.<p>
A plug-in’s main function is typically a switch statement that dispatches the <code>pluginParamBlock</code>, <code>pluginData</code>, and <code>result</code> parameters to different handlers for each selector that the plug-in module responds to. The example plug-in modules show one style of dispatching to selector handlers.<p>
<b>pluginParamBlock</b> <br>
 The <code>pluginParamBlock</code> parameter points to a large structure that is used to pass information back and forth between the host and the plug-in module. The fields of this parameter block change depending on the type of plug-in module. Refer to the individual plug-in modules types (<a class="el" href="pluginmodules.html">Plug In Modules</a>) for descriptions of the parameter block for each type of plug-in module.<p>
<b>pluginData</b> <br>
 The <code>pluginData</code> parameter points to a long integer (32-bit value), which Photoshop maintains for the plug-in module across invocations.<p>
One standard use for this field is to store a handle to a block of memory used to reference the plug-in’s "global" data. It is zero the first time the plug-in module is called.<p>
<b>result</b> <br>
 The <code>result</code> parameter points to a short integer (16bit value). Each time a plug-in module is called, it must set result; do not count on the result parameter containing a valid value when called. Returning a value of zero indicates that no error occurred within the plug-in module’s code.<h2><a class="anchor" name="PGErrorReporting">
Error reporting</a></h2>
The plug-in module may return standard operating system error codes, or report its own errors, in which case it can return any positive integer.<p>
Returning a non-zero number in the result field indicates to the plug-in host that some sort of error occurred. It may also indicate that the user cancelled the operation somewhere during execution of the plug-in.<p>
Returning a positive value indicates the plug-in encountered an error and an appropriate error message has already been displayed to the user. If the user cancels the operation in any way, the plug-in should return a positive value without reporting an error to the user.<p>
Returning a negative value means that the plug-in encountered an error, and the plug-in host should display its standard error dialog.<p>
The following table shows the common error code ranges used by the different types of plug-in modules, as well as some commonly used examples and their values. Refer to the header files and specific chapter for the plug-in type you’re designing for more details.<p>
<table border="1" 
 summary="Error codes" cellspacing="3" cellpadding="3">
<caption align="bottom"><em>Error codes</em></caption>
<tr>
<th>Module </th><th>Error Range </th><th>Definitions </th><th>Value </th></tr>
<tr>
<td>Color Picker </td><td>-30800 to -30899 </td><td><code>pickerBadParameters</code> </td><td>-30800 </td></tr>
<tr>
<td>Import </td><td>–30000 to –30099 </td><td><code>acquireBadParameters</code> <br>
 <code>acquireNoScanner</code> <br>
 <code>acquireScanner</code> </td><td>-30000 <br>
 -30001 <br>
 -30002 </td></tr>
<tr>
<td>Export </td><td>–30200 to –30299 </td><td><code>exportBadParameters</code> <br>
 <code>exportBadMode</code> </td><td>-30200 <br>
 -30201 </td></tr>
<tr>
<td>Filter </td><td>–30100 to –30199 </td><td><code>filterBadParameters</code> <br>
 <code>filterBadMode</code> </td><td>-30100 <br>
 -30101 </td></tr>
<tr>
<td>Format </td><td>–30500 to –30599 </td><td><code>formatBadParameters</code> <br>
 <code>formatBadMode</code> </td><td>-30500 <br>
 -30501 </td></tr>
<tr>
<td>Selection </td><td>–30700 to –30799 </td><td><code>selectionBadParameters</code> <br>
 <code>selectionBadMode</code> </td><td>-30700 <br>
 -30701 </td></tr>
<tr>
<td>General Errors </td><td>–30900 to –30999 </td><td><code>errPlugInHostInsufficient</code> <br>
 <code>errPlugInPropertyUndefined</code> <br>
 <code>errHostDoesNotSupportColStep</code> <br>
 <code>errInvalidsamplePoint</code> </td><td>-30900 <br>
 -30901 <br>
 -30902 <br>
 -30903 </td></tr>
</table>
<p>
The plug-in may also return Mac and Windows operating system error codes to the plug-in host. In <code><a class="el" href="_p_i_types_8h.html">PITypes.h</a></code>, several common Mac OS error codes are defined for use in Windows, simplifying cross-platform programming.<h2><a class="anchor" name="PGAboutBoxes">
About boxes</a></h2>
All plug-ins should respond to a selector value of zero, which means display an About box. The about box may be of any design. To fit in smoothly with the Adobe Photoshop interface, follow these conventions:<ul>
<li>The About box should be centered on the main (menu bar) screen, with 1/3 of the remaining space above the dialog, and 2/3 below. Be sure to take into account the menu bar height. System 7 or later of the Mac OS has a flag in the <code>'DLOG'</code> resource that automatically positions the about box in the window.</li><li>The window should not have an <b>OK</b> button, but should instead respond to a click anywhere in its dialog.</li><li>It should respond to the return and enter keys.</li></ul>
<p>
<dl compact><dt><b>Note:</b></dt><dd>Adobe PhotoDeluxe has very specific dialog design requirements. A sample About box is available in the <code>Photoshop-WDEF</code> folder in the Examples folder.</dd></dl>
<b>The parameter block at selectorAbout</b> <br>
 On the about selector call, the parameter block for the module is not passed. Instead, in its place, a structure of type <code><a class="el" href="struct_about_record.html">AboutRecord</a></code> is passed. Because of this, access to any of the standard parameters for the module during <code>selectorAbout</code> is unavailable.<p>
<b>Multiple plug-ins and selectorAbout</b> <br>
 When Photoshop attempts to bring up the about box for a plug-in module, it makes the about box selector call to each of the plug-ins in the same file. If there is more than one plug-in compiled in a file, only one of them should respond to the call by displaying an about box that describes all the plug-ins. All other plug-in modules should ignore the call and return to the plug-in host. 
<!-- Begin Footer -->
</td>
<td width="20">&nbsp;&nbsp;</td>
</table>

<div id="footerrow"><!--give footer 25px of white above--></div>
<div id="footer" title="footer: links to copyright and other legal information">
<p><a href="licenses.html" class="el">&copy; 2010 Adobe Systems Incorporated</a></p>
<a title="Terms of Use" href="http://www.adobe.com/misc/copyright.html">Terms of Use - </a>
<a title="Privacy Policy" href="http://www.adobe.com/misc/privacy.html">Privacy Policy - </a>
<a href="http://access.adobe.com">Accessibility - </a>
<a title="Avoid software piracy" href="http://www.adobe.com/aboutadobe/antipiracy/main.html">Avoid software piracy - </a>
<a title="Permissions and trademarks" href="http://www.adobe.com/misc/agreement.html">Permissions and trademarks - </a>
<a title="Product License Agreements" href="http://www.adobe.com/products/eulas/main.html">Product License Agreements</a></div>
<p/>
</body>
</html>
